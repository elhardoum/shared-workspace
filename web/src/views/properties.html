<div class="w-full max-w-lg m-auto px-2 mb-6">
    <div class="flex flex-wrap justify-between">
        <h3 class="font-normal">Workspaces for Rent</h3>
    </div>

    <form class="w-full mt-4">
        <div class="flex flex-wrap -mx-3 mb-6">
            <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
                <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="address">
                    Property Address Search
                </label>
                <input class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-light rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-grey" id="address" name="address" placeholder="Search term.." type="text" value="{{qs.address}}" />
            </div>
            <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
                <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="capacity">
                    Minimum Capacity
                </label>
                <input
                    class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-light rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-grey" id="capacity" name="capacity" type="text" placeholder="# of individuals" value="{{qs.capacity}}" />
            </div>
            <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
                <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="categoryid">
                    Category
                </label>
                <div class="relative">
                    <select class="block appearance-none w-full bg-grey-lighter border border-grey-light text-grey-darker py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-grey" id="categoryid" name="categoryid">
                        <option value="">&mdash; Select &mdash;</option>
                        {{#each categories}}
                            <option value="{{id}}" {{#ifeq ../qs.categoryid id}}selected="selected"{{/ifeq}}>{{name}}</option>
                        {{/each}}
                    </select>
                    <div class="pointer-events-none absolute pin-y pin-r flex items-center px-2 text-grey-darker">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" /></svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex flex-wrap -mx-3 mb-6">
            <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
                <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="price-min">
                    Minimum Price
                </label>
                <input
                    class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-light rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-grey"
                    id="price-min" name="price-min"
                    type="text" value="{{qs.price-min}}"
                />
            </div>
            <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
                <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="price-max">
                    Maximum Price
                </label>
                <input
                    class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-light rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-grey"
                    id="price-max" name="price-max"
                    type="text" value="{{qs.price-max}}"
                />
            </div>
            <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
                <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="term">
                    Lease Term
                </label>
                <div class="relative">
                    <select class="block appearance-none w-full bg-grey-lighter border border-grey-light text-grey-darker py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-grey" id="term" name="term">
                        <option value="">&mdash; Select &mdash;</option>
                        <option value="day" {{#ifeq qs.term 'day'}}selected="selected"{{/ifeq}}>Daily</option>
                        <option value="week" {{#ifeq qs.term 'week'}}selected="selected"{{/ifeq}}>Weekly</option>
                        <option value="month" {{#ifeq qs.term 'month'}}selected="selected"{{/ifeq}}>Monthly</option>
                    </select>
                    <div class="pointer-events-none absolute pin-y pin-r flex items-center px-2 text-grey-darker">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" /></svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex flex-wrap -mx-3 mb-6">
            <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="sqft-min">
                    Size (SQFT) Minimum
                </label>
                <input class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-light rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-grey" id="sqft-min" name="sqft-min" type="text" value="{{qs.sqft-min}}" />
            </div>
            <div class="w-full md:w-1/2 px-3">
                <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="sqft-max">
                    Size (SQFT) Maximum
                </label>
                <input class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-light rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-grey" id="sqft-max" name="sqft-max" type="text" value="{{qs.sqft-max}}" />
            </div>
        </div>

        <div class="flex flex-wrap -mx-3 mb-6">
            <div class="w-full px-3">
                <label class="flex items-center">
                    <input type="checkbox" name="parking" {{#if qs.parking}}checked="checked"{{/if}} />
                    <span class="text-grey-darker text-sm ml-2">Parking garage available</span>
                </label>

                <label class="flex items-center">
                    <input type="checkbox" name="publictransportation" {{#if qs.publictransportation}}checked="checked"{{/if}} />
                    <span class="text-grey-darker text-sm ml-2">Reachable by public transportation</span>
                </label>

                <label class="flex items-center">
                    <input type="checkbox" name="smoking" {{#if qs.smoking}}checked="checked"{{/if}} />
                    <span class="text-grey-darker text-sm ml-2">Has smoking designated areas</span>
                </label>
            </div>
        </div>
        
        <div class="mt-4 mb-6">
            <button type="submit" class="bg-blue hover:bg-blue-dark text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Search</button>
        </div>
    </form>

    <div>
        {{#each items}}
            <div class="max-w-2xl bg-white border-2 border-gray-300 p-5 rounded-md tracking-wide mt-4">
                <div class="flex">
                    <a href="/properties/view/{{propertyid}}" class="border h-48 w-48 flex-none bg-cover bg-center md:bg-left rounded-t md:rounded-t-none md:rounded-l text-center overflow-hidden" style="background-image: url('/assets/images/workspace-default.jpeg')"></a>
                    <div class="flex flex-col ml-5">
                        <h4 class="text-xl font-semibold mb-2">
                            <a href="/properties/view/{{propertyid}}" class="text-blue no-underline hover:underline">{{title}} / {{categoryname}}</a>
                        </h4>
                        <p class="text-gray-800 mt-2">
                            <span><strong>Property:</strong> {{propertytitle}}</span><br/>
                            <span><strong>Price:</strong> ${{price}} per {{term}}</span><br/>
                            <span><strong>Address:</strong> {{address}}</span><br/>
                            <span><strong>Property size:</strong> {{squareft}} sqft</span><br/>
                            <span><strong>Capacity:</strong> {{capacity}} individuals</span><br/>
                            <span><strong>Has a parking garage:</strong> {{#if garage}}Yes{{else}}No{{/if}}</span><br/>
                            <span><strong>Reachable by public transportation:</strong> {{#if publictransportation}}Yes{{else}}No{{/if}}</span><br/>
                            <span><strong>Has smoking designated areas:</strong> {{#if smoking}}Yes{{else}}No{{/if}}</span>
                        </p>
                    </div>
                </div>
            </div>
        {{else}}
            {{#if filters_active}}
                <p class="mt-4">No workspaces have matched your filters, please try refining your query.</p>
            {{else}}
                <p class="mt-4">No workspaces are available for rent at the moment. Please check back soon.</p>
            {{/if}}
        {{/each}}
    </div>
</div>

{{#extend "scripts"}}
<script type="text/javascript" src="/assets/js/property-admin.js"></script>
{{/extend}}